# 集中力向上・習慣化アプリ 要件定義書

## 1. プロジェクト概要

### 1.1 目的
集中力を高め、高い集中力を習慣化するためのWebアプリケーション。コレクション機能と作業効率化機能を組み合わせたアプリケーションを提供する。

### 1.2 対象ユーザー
- 集中力を高めたい人
- 作業効率を向上させたい人
- 習慣化を目指す人
- ゲーミフィケーション要素を好む人

## 2. 機能要件

### 2.1 ポモドーロタイマー機能

#### 2.1.1 基本機能
- 作業時間と休憩時間を設定し、タイマーを実行できる
- タイマーの開始、一時停止、リセットが可能

#### 2.1.2 設定項目
- **繰り返しの回数**: ポモドーロセッションを何回繰り返すかを設定（例: 4回、8回など）
- **作業時間**: 1セッションあたりの作業時間を分単位で設定（デフォルト: 25分）
- **短休憩時間**: 通常の休憩時間を分単位で設定（デフォルト: 5分）
- **長休憩時間**: 長休憩の時間を分単位で設定（デフォルト: 15分）
- **長休憩のタイミング**: 何セッションごとに長休憩を入れるかを設定（例: 4セッションごと）

#### 2.1.3 表示要件
- 現在のセッション数（例: 2/4）
- 残り時間の表示（分:秒形式）
- 現在の状態表示（作業中/休憩中/長休憩中）
- 進捗バーまたは視覚的な進捗表示

#### 2.1.4 通知機能
- セッション終了時の通知（音声、ブラウザ通知など）
- 休憩終了時の通知

### 2.2 ジャーナル機能

#### 2.2.1 基本機能
- 日々のメモやジャーナルを記録できる
- 過去のジャーナルを閲覧できる

#### 2.2.2 機能詳細
- **新規作成**: 新しいジャーナルエントリーを作成
- **編集**: 既存のジャーナルエントリーを編集
- **削除**: 不要なジャーナルエントリーを削除
- **日付別表示**: 日付ごとにジャーナルを整理して表示
- **検索機能**: 過去のジャーナルを検索できる（オプション）

#### 2.2.3 データ保存
- 作成日時、更新日時を自動記録
- テキスト形式での保存（マークダウン対応はオプション）

### 2.3 Todoリスト機能

#### 2.3.1 基本機能
- タスクの追加、編集、削除が可能
- タスクの完了状態を管理

#### 2.3.2 タスク情報
各タスクには以下の情報が含まれる:
- **タスク名**: タスクの内容
- **作成日時**: タスクが作成された日時（自動記録）
- **期限日**: タスクの期限日（設定可能）
- **完了状態**: 完了/未完了（チェックボックスで管理）
- **完了日時**: タスクが完了した日時（自動記録）

#### 2.3.3 表示要件
- 当日のタスクを優先表示
- 期限日順でのソート機能
- 完了済みタスクの表示/非表示切り替え
- タスクの追加フォーム

#### 2.3.4 バリデーション
- タスク名は必須
- 期限日の設定は任意（ただし、トロフィー獲得には期限設定が必要）

### 2.4 トロフィーゲットチャレンジ機能

#### 2.4.1 基本機能
- 1日1回、ランダムなトロフィーがチャレンジ画面に出現
- 条件を満たすとトロフィーを獲得できる
- 獲得したトロフィーをコレクションとして管理

#### 2.4.2 トロフィーの種類
- カード形式
- バッジ形式
- 立ち絵形式
- その他の視覚的な報酬

#### 2.4.3 獲得条件
- **基本条件**: その日に定めたTodoタスクをすべて完了する
- **期限条件**: 獲得対象となるTodoタスクは、当日の2日前までに作成されている必要がある
  - 例: 今日が1月5日の場合、1月3日までに作成されたタスクのみが対象
  - 当日または前日に作成されたタスクは獲得条件に含まれない

#### 2.4.4 トロフィーの表示
- **チャレンジ画面**: 当日出現したトロフィーを表示（未獲得状態）
- **獲得時**: 獲得アニメーションや通知を表示
- **コレクション画面**: 獲得済みのトロフィーを一覧表示

#### 2.4.5 トロフィーの消失
- 当日中に条件を満たせなかった場合、そのトロフィーは当日の終了とともに消失
- 消失したトロフィーは翌日以降、再度ランダムに出現する可能性がある

#### 2.4.6 コレクション機能
- 獲得したトロフィーを一覧で表示
- トロフィーの詳細情報を表示（獲得日時など）
- コレクションの進捗状況を表示（獲得数/総数など）

## 3. 非機能要件

### 3.1 パフォーマンス
- ページの読み込み時間: 3秒以内
- タイマーの精度: 1秒単位での正確な計測
- レスポンシブデザイン: モバイル、タブレット、デスクトップに対応

### 3.2 ユーザビリティ
- 直感的なUI/UX
- 操作が簡単で分かりやすい
- 視覚的に分かりやすいデザイン

### 3.3 データ管理
- ローカルストレージまたはブラウザのデータベース（IndexedDB）を使用
- データの自動保存
- データのエクスポート/インポート機能（オプション）

### 3.4 ブラウザ対応
- 主要なモダンブラウザに対応（Chrome, Firefox, Safari, Edge）

## 4. 画面構成

### 4.1 メイン画面
- ポモドーロタイマー
- 本日のTodoリスト（簡易表示）
- 本日のトロフィーチャレンジ（簡易表示）

### 4.2 Todoリスト画面
- タスク一覧
- タスク追加フォーム
- フィルター・ソート機能

### 4.3 ジャーナル画面
- ジャーナル一覧
- ジャーナル作成・編集フォーム
- 日付別表示

### 4.4 トロフィーチャレンジ画面
- 本日出現したトロフィー
- 獲得条件の表示
- 進捗状況の表示

### 4.5 コレクション画面
- 獲得済みトロフィー一覧
- トロフィーの詳細表示
- コレクション進捗

## 5. データモデル

### 5.1 Todoタスク
```
- id: 一意のID
- title: タスク名
- createdAt: 作成日時
- dueDate: 期限日（オプション）
- completed: 完了状態（boolean）
- completedAt: 完了日時（オプション）
```

### 5.2 ジャーナルエントリー
```
- id: 一意のID
- content: ジャーナルの内容
- createdAt: 作成日時
- updatedAt: 更新日時
```

### 5.3 トロフィー
```
- id: 一意のID
- name: トロフィー名
- type: トロフィーの種類（card, badge, character等）
- image: トロフィーの画像URLまたはパス
- description: トロフィーの説明
```

### 5.4 獲得済みトロフィー
```
- id: 一意のID
- trophyId: トロフィーのID
- acquiredAt: 獲得日時
```

### 5.5 ポモドーロ設定
```
- sessionDuration: 作業時間（分）
- shortBreakDuration: 短休憩時間（分）
- longBreakDuration: 長休憩時間（分）
- sessionsUntilLongBreak: 長休憩までのセッション数
- totalSessions: 繰り返し回数
```

## 6. 技術要件

### 6.1 フロントエンド
- モダンなJavaScriptフレームワーク（React, Vue.js等）またはVanilla JavaScript
- CSSフレームワーク（オプション）
- レスポンシブデザイン

### 6.2 データストレージ
- ローカルストレージ（LocalStorage）
- またはIndexedDB（より複雑なデータ構造の場合）

### 6.3 その他
- タイマー機能の実装
- 通知API（Web Notifications API）
- 日付・時刻の処理ライブラリ（必要に応じて）

## 7. 制約事項

### 7.1 トロフィー獲得の制約
- Todoタスクは当日の2日前までに作成されている必要がある
- 当日または前日に作成されたタスクは獲得条件に含まれない
- これは、適当に設定したタスクでもトロフィーを獲得できないようにするための制約

### 7.2 トロフィーの消失
- 当日中に条件を満たせなかったトロフィーは、その日の終了とともに消失
- 消失したトロフィーは翌日以降、再度ランダムに出現する可能性がある

## 8. 今後の拡張可能性

### 8.1 オプション機能
- 統計・分析機能（作業時間の記録、タスク完了率など）
- アカウント機能（複数デバイス間でのデータ同期）
- ソーシャル機能（友達との競争、共有など）
- カスタマイズ機能（テーマ、サウンドなど）
- タスクのカテゴリ分類
- タスクの優先度設定

## 9. 用語定義

- **ポモドーロ**: 25分の作業時間と5分の休憩を繰り返す時間管理手法
- **トロフィー**: チャレンジを達成した際に獲得できる報酬（カード、バッジ、立ち絵など）
- **チャレンジ**: 1日1回出現するトロフィー獲得の機会
- **コレクション**: 獲得済みのトロフィーを管理・閲覧する機能
