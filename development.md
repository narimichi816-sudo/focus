# 集中力向上・習慣化アプリ 開発手順書

## 開発工程概要

本開発手順書は、要件定義書に基づき、集中力向上・習慣化アプリケーションを開発するための手順を時系列に整理したものです。

---

## ステップ1: プロジェクト環境構築

### 目的
開発に必要な環境とプロジェクト構造を整備し、開発基盤を確立する。

### 入力（参照する要件）
- 要件定義書 6.1 フロントエンド
- 要件定義書 6.2 データストレージ
- 要件定義書 6.3 その他

### 作業内容
1. プロジェクトの初期化（npm/yarn等のパッケージマネージャーを使用）
2. フロントエンドフレームワークの選択とセットアップ（React/Vue.js/Vanilla JavaScript）
3. 開発ツールの設定（ESLint、Prettier、ビルドツール等）
4. プロジェクトディレクトリ構造の作成
5. 基本的なHTML/CSS/JavaScriptファイルの作成
6. レスポンシブデザインのためのCSS設定

### 成果物
- プロジェクトディレクトリ構造
- package.json（依存関係定義）
- ビルド設定ファイル
- 基本的なHTMLテンプレート
- 基本的なCSS設定ファイル
- README.md（開発環境セットアップ手順）

### 完了条件
- プロジェクトが正常にビルドできること
- 開発サーバーが起動し、ブラウザで表示できること
- レスポンシブデザインの基本設定が完了していること

---

## ステップ2: データモデル設計とストレージ実装

### 目的
アプリケーションで使用するデータ構造を定義し、データ永続化の仕組みを実装する。

### 入力（参照する要件）
- 要件定義書 5. データモデル
- 要件定義書 3.3 データ管理
- 要件定義書 6.2 データストレージ

### 作業内容
1. データモデルの設計
   - Todoタスクモデル（id, title, createdAt, dueDate, completed, completedAt）
   - ジャーナルエントリーモデル（id, content, createdAt, updatedAt）
   - トロフィーモデル（id, name, type, image, description）
   - 獲得済みトロフィーモデル（id, trophyId, acquiredAt）
   - ポモドーロ設定モデル（sessionDuration, shortBreakDuration, longBreakDuration, sessionsUntilLongBreak, totalSessions）
2. データストレージの選択と実装（LocalStorageまたはIndexedDB）
3. データアクセス層の実装（CRUD操作）
4. データの初期化処理
5. データのバリデーション処理

### 成果物
- データモデル定義ファイル
- ストレージ管理モジュール（StorageManager等）
- データアクセス層（Repository/Service層）
- データバリデーション関数

### 完了条件
- 各データモデルが要件定義書通りに定義されていること
- データの保存・読み込み・更新・削除が正常に動作すること
- データのバリデーションが適切に実装されていること

---

## ステップ3: 共通UIコンポーネントの実装

### 目的
アプリケーション全体で使用する共通UIコンポーネントを実装し、一貫性のあるUIを提供する。

### 入力（参照する要件）
- 要件定義書 3.2 ユーザビリティ
- 要件定義書 4. 画面構成

### 作業内容
1. レイアウトコンポーネントの実装（ヘッダー、フッター、サイドバー等）
2. ナビゲーションコンポーネントの実装
3. ボタン、入力フィールド、カード等の基本UIコンポーネントの実装
4. モーダル、通知表示等の共通機能コンポーネントの実装
5. レスポンシブデザインの適用

### 成果物
- 共通UIコンポーネントライブラリ
- コンポーネントスタイル定義
- コンポーネント使用例・ドキュメント

### 完了条件
- 主要な共通コンポーネントが実装されていること
- レスポンシブデザインが適用されていること
- コンポーネントが再利用可能な形で実装されていること

---

## ステップ4: ポモドーロタイマー機能の実装

### 目的
ポモドーロタイマーの基本機能を実装し、作業時間と休憩時間を管理できるようにする。

### 入力（参照する要件）
- 要件定義書 2.1 ポモドーロタイマー機能
- 要件定義書 5.5 ポモドーロ設定

### 作業内容
1. タイマーの基本機能実装
   - タイマーの開始、一時停止、リセット機能
   - カウントダウン機能（1秒単位）
2. 設定機能の実装
   - 繰り返し回数の設定
   - 作業時間の設定（デフォルト: 25分）
   - 短休憩時間の設定（デフォルト: 5分）
   - 長休憩時間の設定（デフォルト: 15分）
   - 長休憩のタイミング設定
3. 表示機能の実装
   - 現在のセッション数の表示（例: 2/4）
   - 残り時間の表示（分:秒形式）
   - 現在の状態表示（作業中/休憩中/長休憩中）
   - 進捗バーまたは視覚的な進捗表示
4. セッション管理機能の実装
   - セッションの自動切り替え（作業→休憩→作業）
   - 長休憩の自動挿入
5. 設定の保存機能（LocalStorage等）

### 成果物
- ポモドーロタイマーコンポーネント
- タイマー設定画面
- タイマー表示画面
- 設定データの永続化機能

### 完了条件
- タイマーの開始、一時停止、リセットが正常に動作すること
- 設定項目がすべて実装され、保存・読み込みができること
- セッションの自動切り替えが正常に動作すること
- 表示要件がすべて満たされていること

---

## ステップ5: 通知機能の実装

### 目的
ポモドーロタイマーのセッション終了時や休憩終了時に通知を表示する機能を実装する。

### 入力（参照する要件）
- 要件定義書 2.1.4 通知機能
- 要件定義書 6.3 その他（通知API）

### 作業内容
1. Web Notifications APIの実装
2. ブラウザ通知の許可リクエスト処理
3. セッション終了時の通知実装
4. 休憩終了時の通知実装
5. 音声通知の実装（オプション）
6. 通知設定の実装（通知のON/OFF等）

### 成果物
- 通知管理モジュール
- 通知設定画面
- 通知許可リクエスト処理

### 完了条件
- セッション終了時に通知が表示されること
- 休憩終了時に通知が表示されること
- ブラウザ通知の許可リクエストが正常に動作すること
- 通知設定が保存・反映されること

---

## ステップ6: Todoリスト機能の実装

### 目的
タスクの追加、編集、削除、完了状態の管理ができるTodoリスト機能を実装する。

### 入力（参照する要件）
- 要件定義書 2.3 Todoリスト機能
- 要件定義書 5.1 Todoタスク

### 作業内容
1. TodoタスクのCRUD機能実装
   - タスクの追加
   - タスクの編集
   - タスクの削除
   - タスクの完了状態の切り替え
2. タスク情報の管理
   - タスク名の入力
   - 期限日の設定（オプション）
   - 作成日時の自動記録
   - 完了日時の自動記録
3. 表示機能の実装
   - 当日のタスクを優先表示
   - 期限日順でのソート機能
   - 完了済みタスクの表示/非表示切り替え
   - タスクの追加フォーム
4. バリデーション機能の実装
   - タスク名の必須チェック
   - 期限日の妥当性チェック
5. データの永続化（LocalStorage等）

### 成果物
- Todoリストコンポーネント
- Todoタスク追加・編集フォーム
- Todoタスク一覧表示
- フィルター・ソート機能
- Todoデータ管理モジュール

### 完了条件
- タスクの追加、編集、削除、完了状態の切り替えが正常に動作すること
- 表示要件がすべて満たされていること
- バリデーションが適切に実装されていること
- データが永続化されること

---

## ステップ7: ジャーナル機能の実装

### 目的
日々のメモやジャーナルを記録・閲覧できる機能を実装する。

### 入力（参照する要件）
- 要件定義書 2.2 ジャーナル機能
- 要件定義書 5.2 ジャーナルエントリー

### 作業内容
1. ジャーナルのCRUD機能実装
   - 新規ジャーナルエントリーの作成
   - 既存ジャーナルエントリーの編集
   - ジャーナルエントリーの削除
2. 表示機能の実装
   - 日付別表示
   - ジャーナル一覧表示
   - ジャーナル詳細表示
3. 検索機能の実装（オプション）
   - 過去のジャーナルを検索
4. データ管理
   - 作成日時、更新日時の自動記録
   - テキスト形式での保存（マークダウン対応はオプション）
5. データの永続化（LocalStorage等）

### 成果物
- ジャーナルコンポーネント
- ジャーナル作成・編集フォーム
- ジャーナル一覧表示
- 日付別表示機能
- 検索機能（オプション）
- ジャーナルデータ管理モジュール

### 完了条件
- ジャーナルの作成、編集、削除が正常に動作すること
- 日付別表示が正常に動作すること
- 作成日時、更新日時が自動記録されること
- データが永続化されること

---

## ステップ8: トロフィーデータの準備

### 目的
トロフィーゲットチャレンジ機能で使用するトロフィーデータを準備する。

### 入力（参照する要件）
- 要件定義書 2.4.2 トロフィーの種類
- 要件定義書 5.3 トロフィー

### 作業内容
1. トロフィーの種類とデザインの決定
   - カード形式
   - バッジ形式
   - 立ち絵形式
   - その他の視覚的な報酬
2. トロフィーデータの作成
   - トロフィーID、名前、種類、画像、説明の定義
   - トロフィーデータのJSON形式での定義
3. トロフィー画像の準備
   - 各トロフィーの画像アセットの作成または取得
4. トロフィーデータの初期化処理

### 成果物
- トロフィーデータ定義ファイル（JSON等）
- トロフィー画像アセット
- トロフィーデータ初期化処理

### 完了条件
- トロフィーデータが適切に定義されていること
- トロフィー画像が準備されていること
- トロフィーデータがアプリケーションで読み込めること

---

## ステップ9: トロフィーゲットチャレンジ機能の実装

### 目的
1日1回ランダムに出現するトロフィーチャレンジ機能を実装し、条件を満たすとトロフィーを獲得できるようにする。

### 入力（参照する要件）
- 要件定義書 2.4 トロフィーゲットチャレンジ機能
- 要件定義書 2.4.3 獲得条件
- 要件定義書 7.1 トロフィー獲得の制約
- 要件定義書 7.2 トロフィーの消失

### 作業内容
1. トロフィーのランダム出現機能の実装
   - 1日1回のトロフィー出現ロジック
   - ランダム選択アルゴリズム
   - 日付に基づく出現判定
2. 獲得条件の判定機能の実装
   - 基本条件: その日に定めたTodoタスクをすべて完了する
   - 期限条件: 獲得対象となるTodoタスクは、当日の2日前までに作成されている必要がある
   - 当日または前日に作成されたタスクは獲得条件に含めない
3. トロフィー獲得処理の実装
   - 条件満たした際の獲得処理
   - 獲得済みトロフィーの保存
   - 獲得日時の記録
4. トロフィーの消失処理の実装
   - 当日中に条件を満たせなかった場合の消失処理
   - 日付変更時の処理
5. チャレンジ画面の実装
   - 当日出現したトロフィーの表示（未獲得状態）
   - 獲得条件の表示
   - 進捗状況の表示
6. 獲得アニメーション・通知の実装

### 成果物
- トロフィーチャレンジコンポーネント
- トロフィー出現ロジック
- 獲得条件判定モジュール
- 獲得処理モジュール
- 消失処理モジュール
- チャレンジ画面UI

### 完了条件
- 1日1回ランダムにトロフィーが出現すること
- 獲得条件が正確に判定されること（2日前までに作成されたタスクのみが対象）
- 条件を満たした際にトロフィーが獲得できること
- 当日中に条件を満たせなかった場合、トロフィーが消失すること
- 獲得アニメーション・通知が表示されること

---

## ステップ10: コレクション機能の実装

### 目的
獲得済みのトロフィーを一覧表示し、コレクションとして管理できる機能を実装する。

### 入力（参照する要件）
- 要件定義書 2.4.6 コレクション機能
- 要件定義書 5.4 獲得済みトロフィー

### 作業内容
1. コレクション画面の実装
   - 獲得済みトロフィーの一覧表示
   - トロフィーの詳細表示（獲得日時など）
2. コレクション進捗の表示
   - 獲得数/総数の表示
   - 進捗率の表示
3. トロフィーのソート・フィルター機能（オプション）
   - 獲得日時順でのソート
   - トロフィー種類でのフィルター
4. データの永続化（LocalStorage等）

### 成果物
- コレクション画面コンポーネント
- トロフィー一覧表示
- コレクション進捗表示
- コレクションデータ管理モジュール

### 完了条件
- 獲得済みトロフィーが一覧表示されること
- トロフィーの詳細情報が表示されること
- コレクション進捗が表示されること
- データが永続化されること

---

## ステップ11: メイン画面の統合

### 目的
各機能を統合したメイン画面を実装し、アプリケーションのエントリーポイントを完成させる。

### 入力（参照する要件）
- 要件定義書 4.1 メイン画面

### 作業内容
1. メイン画面レイアウトの実装
   - ポモドーロタイマーの表示
   - 本日のTodoリストの簡易表示
   - 本日のトロフィーチャレンジの簡易表示
2. 画面遷移の実装
   - 各機能画面へのナビゲーション
   - ルーティング設定（SPAの場合）
3. レスポンシブデザインの適用
4. UI/UXの調整

### 成果物
- メイン画面コンポーネント
- ナビゲーション機能
- ルーティング設定（SPAの場合）

### 完了条件
- メイン画面にすべての主要機能が表示されること
- 各機能画面への遷移が正常に動作すること
- レスポンシブデザインが適用されていること

---

## ステップ12: 画面遷移とナビゲーションの実装

### 目的
各画面間の遷移を実装し、ユーザーがスムーズにアプリケーションを利用できるようにする。

### 入力（参照する要件）
- 要件定義書 4. 画面構成

### 作業内容
1. 画面遷移の実装
   - Todoリスト画面への遷移
   - ジャーナル画面への遷移
   - トロフィーチャレンジ画面への遷移
   - コレクション画面への遷移
2. ナビゲーションUIの実装
   - メニュー、タブ、サイドバー等のナビゲーション要素
3. ルーティングの実装（SPAの場合）
   - 各画面へのルート定義
   - ルートガード（必要に応じて）
4. ブラウザの戻る/進むボタンとの連携

### 成果物
- ナビゲーションコンポーネント
- ルーティング設定
- 各画面コンポーネント

### 完了条件
- すべての画面間の遷移が正常に動作すること
- ナビゲーションが直感的で使いやすいこと
- ブラウザの戻る/進むボタンが正常に動作すること

---

## ステップ13: スタイリングとUI/UXの改善

### 目的
アプリケーション全体のデザインを統一し、ユーザビリティを向上させる。

### 入力（参照する要件）
- 要件定義書 3.2 ユーザビリティ
- 要件定義書 3.1 パフォーマンス（レスポンシブデザイン）

### 作業内容
1. デザインシステムの確立
   - カラーパレットの定義
   - タイポグラフィの設定
   - スペーシング、レイアウトの統一
2. 各画面のスタイリング
   - ポモドーロタイマー画面
   - Todoリスト画面
   - ジャーナル画面
   - トロフィーチャレンジ画面
   - コレクション画面
3. レスポンシブデザインの最終調整
   - モバイル、タブレット、デスクトップでの表示確認
4. アニメーション・トランジションの追加
   - 画面遷移のアニメーション
   - インタラクションのフィードバック
5. アクセシビリティの向上
   - キーボード操作の対応
   - スクリーンリーダー対応（必要に応じて）

### 成果物
- デザインシステム定義
- スタイルシート
- レスポンシブデザイン実装
- アニメーション・トランジション実装

### 完了条件
- デザインが統一されていること
- すべての画面がレスポンシブデザインに対応していること
- UI/UXが直感的で使いやすいこと
- 主要なブラウザで正常に表示されること

---

## ステップ14: パフォーマンス最適化

### 目的
アプリケーションのパフォーマンスを向上させ、要件を満たす。

### 入力（参照する要件）
- 要件定義書 3.1 パフォーマンス

### 作業内容
1. ページ読み込み時間の最適化
   - コードの分割（Code Splitting）
   - 画像の最適化
   - 不要なリソースの削除
2. タイマーの精度確認
   - 1秒単位での正確な計測の確認
   - バックグラウンド時の動作確認
3. データ読み込みの最適化
   - 大量データの遅延読み込み
   - キャッシュの活用
4. レンダリングパフォーマンスの最適化
   - 不要な再レンダリングの防止
   - 仮想スクロールの実装（必要に応じて）

### 成果物
- 最適化されたビルドファイル
   - パフォーマンス測定レポート

### 完了条件
- ページの読み込み時間が3秒以内であること
- タイマーが1秒単位で正確に計測されること
- レスポンシブデザインが正常に動作すること
- パフォーマンス測定結果が要件を満たしていること

---

## ステップ15: ブラウザ互換性の確認

### 目的
主要なモダンブラウザでアプリケーションが正常に動作することを確認する。

### 入力（参照する要件）
- 要件定義書 3.4 ブラウザ対応

### 作業内容
1. 各ブラウザでの動作確認
   - Chrome
   - Firefox
   - Safari
   - Edge
2. ブラウザ固有の問題の修正
   - CSSの互換性問題
   - JavaScript APIの互換性問題
   - 通知APIの動作確認
3. ポリフィルの追加（必要に応じて）
4. テスト結果の記録

### 成果物
- ブラウザ互換性テスト結果
- 修正されたコード

### 完了条件
- 主要なモダンブラウザ（Chrome, Firefox, Safari, Edge）で正常に動作すること
- ブラウザ固有の問題が解決されていること

---

## ステップ16: データエクスポート/インポート機能の実装（オプション）

### 目的
ユーザーがデータをエクスポート/インポートできる機能を実装する（要件定義書ではオプション機能）。

### 入力（参照する要件）
- 要件定義書 3.3 データ管理（データのエクスポート/インポート機能（オプション））

### 作業内容
1. データエクスポート機能の実装
   - すべてのデータ（Todo、ジャーナル、トロフィー、設定等）をJSON形式でエクスポート
2. データインポート機能の実装
   - JSON形式のデータをインポート
   - データのバリデーション
   - 既存データとのマージまたは上書きの選択
3. エクスポート/インポート画面の実装
4. エラーハンドリング

### 成果物
- データエクスポート機能
- データインポート機能
- エクスポート/インポート画面

### 完了条件
- データのエクスポートが正常に動作すること
- データのインポートが正常に動作すること
- エラーハンドリングが適切に実装されていること

---

## ステップ17: テストの実施

### 目的
アプリケーションの品質を確保するため、各種テストを実施する。

### 入力（参照する要件）
- 要件定義書全体（機能要件、非機能要件）

### 作業内容
1. 単体テストの実施
   - 各機能モジュールのテスト
   - データアクセス層のテスト
2. 統合テストの実施
   - 機能間の連携テスト
3. 結合テストの実施
   - エンドツーエンドのテスト
4. ユーザビリティテストの実施
   - 実際の操作フローの確認
5. バグの修正
6. テスト結果の記録

### 成果物
- テストケース
- テスト結果レポート
- バグ修正履歴

### 完了条件
- すべての主要機能が正常に動作すること
- 要件定義書に記載された機能要件、非機能要件が満たされていること
- 重大なバグが存在しないこと

---

## ステップ18: ドキュメント作成

### 目的
アプリケーションの使用方法や技術仕様を文書化する。

### 入力（参照する要件）
- 要件定義書全体
- 実装された機能

### 作業内容
1. ユーザーマニュアルの作成
   - アプリケーションの使い方
   - 各機能の説明
2. 技術ドキュメントの作成
   - アーキテクチャの説明
   - データモデルの説明
   - API仕様（内部API）
3. README.mdの更新
   - プロジェクト概要
   - セットアップ手順
   - 開発手順

### 成果物
- ユーザーマニュアル
- 技術ドキュメント
- 更新されたREADME.md

### 完了条件
- ユーザーマニュアルが完成していること
- 技術ドキュメントが完成していること
- README.mdが最新の状態であること

---

## ステップ19: 最終確認とリリース準備

### 目的
リリース前に最終確認を行い、リリース準備を整える。

### 入力（参照する要件）
- 要件定義書全体

### 作業内容
1. 要件定義書との照合
   - すべての機能要件が実装されているか確認
   - 非機能要件が満たされているか確認
2. 最終動作確認
   - 主要な操作フローの確認
   - エッジケースの確認
3. パフォーマンスの最終確認
4. セキュリティチェック（必要に応じて）
5. リリース用ビルドの作成
6. デプロイ手順の確認

### 成果物
- 最終確認チェックリスト
- リリース用ビルド
- デプロイ手順書

### 完了条件
- 要件定義書のすべての要件が満たされていること
- リリース用ビルドが作成されていること
- デプロイ手順が明確になっていること

---

## 要確認事項

以下の項目について、要件定義書に明記されていないため、開発前に確認が必要です。

1. **フロントエンドフレームワークの選択**
   - React、Vue.js、Vanilla JavaScriptのいずれを使用するか
   - フレームワークを使用する場合のバージョン

2. **CSSフレームワークの使用**
   - CSSフレームワーク（Bootstrap、Tailwind CSS等）を使用するか
   - カスタムCSSのみで実装するか

3. **トロフィーの総数**
   - トロフィーの総数はいくつか
   - トロフィーの種類ごとの数

4. **トロフィー画像の作成方法**
   - 画像は既に用意されているか
   - 画像の形式（PNG、SVG等）
   - 画像のサイズ規格

5. **マークダウン対応**
   - ジャーナル機能でマークダウンを使用するか（要件定義書ではオプション）

6. **データエクスポート/インポート機能**
   - データエクスポート/インポート機能を実装するか（要件定義書ではオプション）

7. **統計・分析機能**
   - 統計・分析機能を実装するか（要件定義書ではオプション、今後の拡張可能性）

8. **デプロイ環境**
   - アプリケーションのデプロイ先（GitHub Pages、Netlify、Vercel等）
   - デプロイ方法

9. **日付・時刻のタイムゾーン**
   - 日付・時刻の処理におけるタイムゾーンの扱い
   - 「当日の2日前」の判定におけるタイムゾーンの考慮

10. **通知の音声**
    - 音声通知を使用する場合の音声ファイルの有無
    - 音声ファイルの形式

11. **検索機能の詳細**
    - ジャーナルの検索機能の詳細仕様（全文検索、部分一致等）

12. **タスクの優先度・カテゴリ**
    - タスクの優先度設定やカテゴリ分類を実装するか（要件定義書ではオプション、今後の拡張可能性）

---

## 開発工程の依存関係

以下の工程には依存関係があります。開発時は順序を考慮してください。

- **ステップ2（データモデル設計）** → **ステップ6（Todoリスト）、ステップ7（ジャーナル）、ステップ9（トロフィーチャレンジ）**
- **ステップ3（共通UIコンポーネント）** → **ステップ4以降のすべての画面実装**
- **ステップ4（ポモドーロタイマー）** → **ステップ5（通知機能）**
- **ステップ6（Todoリスト）** → **ステップ9（トロフィーチャレンジ）**（獲得条件判定でTodoデータを使用）
- **ステップ8（トロフィーデータ準備）** → **ステップ9（トロフィーチャレンジ）、ステップ10（コレクション）**
- **ステップ9（トロフィーチャレンジ）** → **ステップ10（コレクション）**
- **ステップ4〜10（各機能実装）** → **ステップ11（メイン画面統合）**
- **ステップ11（メイン画面統合）** → **ステップ12（画面遷移）**
- **ステップ4〜12（機能実装）** → **ステップ13（スタイリング）**
- **ステップ13（スタイリング）** → **ステップ14（パフォーマンス最適化）**
- **ステップ14（パフォーマンス最適化）** → **ステップ15（ブラウザ互換性確認）**
- **ステップ15（ブラウザ互換性確認）** → **ステップ17（テスト）**
- **ステップ17（テスト）** → **ステップ19（最終確認）**

---

## 注意事項

1. 各ステップの完了条件を満たしてから次のステップに進むこと
2. 要確認事項については、開発開始前に必ず確認すること
3. 要件定義書に記載されていない機能を追加する場合は、事前に確認すること
4. データの永続化は各機能実装時に同時に実装すること
5. レスポンシブデザインは各画面実装時に同時に考慮すること
6. テストは各機能実装後、随時実施すること
